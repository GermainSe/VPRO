//
// Created by gesper on 1/12/21.
//

#include "cnn_struct_reduced.h"
#include "testlayer.h"

namespace TESTLAYER {

    RELUTYPE::RELUTYPE test_layer_relu = RELUTYPE::NONE; // LEAKY TODO

    int16_t conv_result_shift_right = 7;  // 7 TODO
    int16_t bias_store_shift_right = 8;   // 8 TODO
    int16_t bias_load_shift_right = -5;   // -5 TODO

    int16_t result_fractional_bit = 0;
    int16_t result_integer_bit = 0;

    //Data Format is (# out channels)(# in channels)(# kernel W*H)
    int16_t conv_weights[test_layer_in_channels][test_layer_out_channels][test_layer_kernel * test_layer_kernel] =
            {{{-2342,-6711,-4599, -885,  696, 3061, 2753, 6401, 2358},
                     {  -51, 1147, 1169,  -24, 1343, 1091, -377,  598,  407},
                     { 1353, 2741, 1292, 3505, 5006, 2173, 2163, 3119,  745},},
             {{-1498,-5682,-3797,-1158,  929, 3126, 1687, 4901, 1578},
                     {-2198,-1946,-2075,-2971,-2975,-2479,-2644,-2309,-2136},
                     { -745,-1196,   44,-1743,-2274,  -85, -603,-1205, 1245}}};
//              {0,0,0,0,1,0,0,0,0},
//              {0,0,0,0,1,0,0,0,0}},
//             {{0,0,0,0,1,0,0,0,0},
//              {0,0,0,0,1,0,0,0,0},
//              {0,0,0,0,1,0,0,0,0}}};

//            {{{-2342,-6711,-4599, -885,  696, 3061, 2753, 6401, 2358},
//                     {  -51, 1147, 1169,  -24, 1343, 1091, -377,  598,  407},
//                     { 1353, 2741, 1292, 3505, 5006, 2173, 2163, 3119,  745},
//                     { 2074, 4422, 2844,-1334, 1073, 2429,-3864,-4910,-1815},
//                     {-1919,-1367,-2076,-2340,-3402,-2059,-2401,-3270,-1771},
//                     {-3781, 1172, 3227,-5041, 1876, 3366,-3973, 1571, 2859},
//                     {    0,-2600,-2014, 3162, -530,-3132, 2415, 3050,  216},
//                     {  -46, -108, 1762,-1369, -758,  989,-1273, -859,  516},
//                     { -222,  280, -241, -605, -567, -604, -618,  146, -399},
//                     { -899, 4910,-4178,-2809, 6757,-3867,-2694, 4515,-1882},
//                     { -830,-1692,-1383,-1570,-2458,-2197,-1768,-2064,-1565},
//                     { -184, -329, -184,   -2, -518, -244, -525, -643, -499},
//                     {  -46, 1997,  -89,  496, 1829,  968, -339,   10,-1604},
//                     { 2285, 3069,-2165, 4502, 1129,-5062, 3233,-2262,-3483},
//                     {  658,-3199, 2502, -387,-4458, 4915,-2210,  834, 1261},
//                     { -347,-2153,  144, -438,-3180,-1582, 1080,-1061, -117}},
//
//             {{-1246,-5754,-3578,-1093,  700, 2863, 1869, 5062,  849},
//                     { 1636, 1941, 1582, 1816, 2004, 1761, 1592, 1949, 1810},
//                     { -379, -895,-1101,-1427,-2433,-2259,-1648,-2122,-2127},
//                     { 1319, 3368, 2200, -983,  906, 2266,-2923,-4615,-1959},
//                     {  108, 2165, 1646, 1153,  387, 1407,  764,  761, 1926},
//                     {-3707,  787, 2479,-4929, 1816, 2931,-3066, 1187, 1869},
//                     {  514,-2252,-1946, 2839,  167,-3248, 1789, 2897,  149},
//                     {-1068, -287, 1371,-1324, -795, 1172,-1590, -517, 1042},
//                     { -205, -150,   55, -556, -471,  -62, -309, -267, -465},
//                     { -959, 4711,-4039,-2774, 6520,-3524,-2771, 3960,-1398},
//                     { -638,-1286,-1542,-1543,-1994,-1922,-1157,-1791,-1655},
//                     {   39, -621,  -44, -649, -188, -628, -731, -532, -343},
//                     {  173, 1915,   93,  267, 2445, 1003, -912,   20,-1745},
//                     { 1862, 2444,-2634, 3733,  679,-4945, 2677,-1942,-2543},
//                     { 1562,-2918, 1663,  679,-4460, 3929,-1528,  904,  596},
//                     { -192,-1462, -297, -122,-2591,-1077,  776, -800,   74}},
//
//             {{-1498,-5682,-3797,-1158,  929, 3126, 1687, 4901, 1578},
//                     {-2198,-1946,-2075,-2971,-2975,-2479,-2644,-2309,-2136},
//                     { -745,-1196,   44,-1743,-2274,  -85, -603,-1205, 1245},
//                     { 1550, 2868, 1472, -925,  832, 1612,-2911,-3774,-1575},
//                     {  229, 2835,  274, 2558, 2936, -124, 1820, 1980,  106},
//                     {-2688,  530, 1155,-3837, 1539, 1761,-2449, 1461, 1539},
//                     { -379,-2951,-2211, 2800,  -99,-2993, 2031, 2663,  239},
//                     {  320,  926,  699,  567, 1082, 1429, 1056, 1557, 1727},
//                     { -490, -258,   33, -613, -538, -200, -484, -560, -421},
//                     { -525, 2932,-2572,-1924, 4437,-2283,-1806, 2236, -588},
//                     { -787,-1819,-1714,-1517,-1837,-1816,-1591,-1918,-1499},
//                     { -201, -395, -126, -439,   29, -387, -368, -507,   62},
//                     { -131, 1688,    1,   71, 1588,  448,-1406, -100,-2051},
//                     { 1750, 2248,-2227, 3248,  879,-4267, 2240,-1970,-2596},
//                     { 1058,-2692, 1074,    0,-3810, 3236,-1733, 1161,  486},
//                     { -645,-2043, -296, -813,-2526,-1229, -605,-1349, -665}}} ;

    int16_t bias[test_layer_out_channels] =
//            { 0, 0, 0};
//            {  347,  453,  283,  412,  777,  635,  281,-1771, -109,  -13, 4161,  -53,-2950,  505, 360, 4929};
            {347,  453,  283};
//    {1};
}
